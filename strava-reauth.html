<!DOCTYPE html>
<html>
<head>
    <title>Strava Re-authorization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #1a1a2e;
            color: white;
        }
        .container {
            background-color: #16213e;
            padding: 30px;
            border-radius: 10px;
            border: 1px solid #4a90e2;
        }
        .auth-button {
            display: inline-block;
            background-color: #fc5200;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 5px;
            font-size: 18px;
            margin: 20px 0;
        }
        .auth-button:hover {
            background-color: #e04600;
        }
        .code-box {
            background-color: #0a0a0a;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
        }
        .step {
            margin: 20px 0;
            padding: 15px;
            background-color: rgba(74, 144, 226, 0.1);
            border-radius: 5px;
            border-left: 4px solid #4a90e2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÉ‚Äç‚ôÇÔ∏è Strava Re-authorization</h1>
        <p>To access your individual activities (including that 30k run!), we need to re-authorize with the correct permissions.</p>
        
        <div class="step">
            <h3>Step 1: Click the authorization link</h3>
            <a href="https://www.strava.com/oauth/authorize?client_id=161983&redirect_uri=http://localhost:8000&response_type=code&scope=read,activity:read,profile:read_all&approval_prompt=force" 
               class="auth-button" target="_blank">
                üîê Authorize Strava Access
            </a>
            <p><small>This will open Strava's authorization page in a new tab.</small></p>
        </div>

        <div class="step">
            <h3>Step 2: After authorization</h3>
            <p>After you click "Authorize", Strava will redirect you to a localhost URL that looks like:</p>
            <div class="code-box">
                http://localhost:8000/?state=&code=SOME_LONG_CODE_HERE&scope=read,activity:read,profile:read_all
            </div>
            <p><strong>Copy the entire code value</strong> (the part after <code>code=</code> and before <code>&scope</code>)</p>
        </div>

        <div class="step">
            <h3>Step 3: Exchange the code for tokens</h3>
            <p>Run this curl command in your terminal (replace YOUR_CODE_HERE with the actual code):</p>
            <div class="code-box">
curl -X POST https://www.strava.com/oauth/token \
  -d client_id=161983 \
  -d client_secret=242b2f90cc40e1d91b4727293867c3474c1a5ce1 \
  -d code=YOUR_CODE_HERE \
  -d grant_type=authorization_code
            </div>
        </div>

        <div class="step">
            <h3>Step 4: Update your .env file</h3>
            <p>The curl command will return a JSON response with new tokens. Update your <code>.env</code> file with the new values:</p>
            <div class="code-box">
REACT_APP_STRAVA_ACCESS_TOKEN=your_new_access_token
REACT_APP_STRAVA_REFRESH_TOKEN=your_new_refresh_token
            </div>
        </div>

        <h2>üéØ What this will give us:</h2>
        <ul>
            <li>‚úÖ Access to all your individual activities</li>
            <li>‚úÖ Ability to filter 2025 running activities</li>
            <li>‚úÖ Find your actual longest run (30k!)</li>
            <li>‚úÖ More accurate statistics</li>
        </ul>

        <p><strong>Current scopes we're requesting:</strong></p>
        <ul>
            <li><code>read</code> - Read public profile data</li>
            <li><code>activity:read</code> - Read your activities</li>
            <li><code>profile:read_all</code> - Read detailed profile information</li>
        </ul>
    </div>
</body>
</html>